{
  "version": "1.0",
  "description": "Titan API Gateway - Example Configuration",
  "server": {
    "worker_threads": 0,
    "io_ring_entries": 256,
    "use_sqpoll": false,
    "listen_address": "0.0.0.0",
    "listen_port": 8080,
    "backlog": 128,
    "read_timeout": 60000,
    "write_timeout": 60000,
    "idle_timeout": 300000,
    "shutdown_timeout": 30000,
    "max_connections": 10000,
    "max_request_size": 1048576,
    "max_header_size": 8192,
    "websocket": {
      "enabled": true,
      "max_frame_size": 1048576,
      "max_message_size": 10485760,
      "idle_timeout": 300,
      "ping_interval": 30,
      "max_connections_per_worker": 10000
    }
  },
  "upstreams": [
    {
      "name": "api_backend",
      "load_balancing": "round_robin",
      "max_retries": 2,
      "retry_timeout": 1000,
      "pool_size": 100,
      "pool_idle_timeout_seconds": 60,
      "backends": [
        {
          "host": "localhost",
          "port": 3000,
          "weight": 1,
          "max_connections": 1000,
          "health_check_enabled": true,
          "health_check_interval": 30,
          "health_check_timeout": 5,
          "health_check_path": "/health"
        },
        {
          "host": "localhost",
          "port": 3001,
          "weight": 1,
          "max_connections": 1000,
          "health_check_enabled": true,
          "health_check_interval": 30,
          "health_check_timeout": 5,
          "health_check_path": "/health"
        }
      ]
    },
    {
      "name": "web_backend",
      "load_balancing": "least_connections",
      "max_retries": 1,
      "retry_timeout": 500,
      "pool_size": 50,
      "pool_idle_timeout_seconds": 120,
      "backends": [
        {
          "host": "localhost",
          "port": 8081,
          "weight": 2,
          "max_connections": 500,
          "health_check_enabled": true,
          "health_check_interval": 60,
          "health_check_timeout": 10,
          "health_check_path": "/"
        }
      ]
    }
  ],
  "routes": [
    {
      "path": "/",
      "method": "GET",
      "upstream": "web_backend",
      "handler_id": "index",
      "priority": 0
    },
    {
      "path": "/api/users",
      "method": "GET",
      "upstream": "api_backend",
      "handler_id": "list_users",
      "priority": 10
    },
    {
      "path": "/api/users/:id",
      "method": "GET",
      "upstream": "api_backend",
      "handler_id": "get_user",
      "priority": 10
    },
    {
      "path": "/api/users",
      "method": "POST",
      "upstream": "api_backend",
      "handler_id": "create_user",
      "priority": 10
    },
    {
      "path": "/api/users/:id",
      "method": "PUT",
      "upstream": "api_backend",
      "handler_id": "update_user",
      "priority": 10
    },
    {
      "path": "/api/users/:id",
      "method": "DELETE",
      "upstream": "api_backend",
      "handler_id": "delete_user",
      "priority": 10
    },
    {
      "path": "/static/*",
      "method": "GET",
      "upstream": "web_backend",
      "handler_id": "static_files",
      "priority": 5
    },
    {
      "path": "/ws/chat",
      "method": "GET",
      "upstream": "api_backend",
      "handler_id": "websocket_chat",
      "priority": 10,
      "websocket": {
        "enabled": true,
        "idle_timeout": 600
      }
    }
  ],
  "cors": {
    "enabled": true,
    "allowed_origins": ["*"],
    "allowed_methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
    "allowed_headers": ["*"],
    "allow_credentials": false,
    "max_age": 86400
  },
  "rate_limit": {
    "enabled": true,
    "requests_per_second": 1000,
    "burst_size": 2000,
    "key": "client_ip"
  },
  "auth": {
    "enabled": false,
    "type": "bearer",
    "header": "Authorization",
    "valid_tokens": []
  },
  "logging": {
    "level": "info",
    "format": "json",
    "log_requests": true,
    "log_responses": false,
    "exclude_paths": ["/health", "/metrics"]
  },
  "metrics": {
    "enabled": true,
    "port": 9090,
    "path": "/metrics",
    "format": "prometheus"
  }
}
