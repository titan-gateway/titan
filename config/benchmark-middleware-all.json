{
  "version": "1.0",
  "description": "Titan Benchmark - All Middleware Enabled (Maximum Overhead)",

  "server": {
    "worker_threads": 4,
    "listen_address": "0.0.0.0",
    "listen_port": 8080,
    "backlog": 2048,
    "read_timeout": 60000,
    "write_timeout": 60000,
    "idle_timeout": 300000,
    "shutdown_timeout": 30000,
    "max_connections": 10000,
    "max_request_size": 1048576,
    "max_header_size": 8192
  },

  "upstreams": [
    {
      "name": "mock_backend",
      "load_balancing": "round_robin",
      "pool_size": 100,
      "pool_idle_timeout_seconds": 60,
      "backends": [
        {
          "host": "127.0.0.1",
          "port": 3001,
          "weight": 1,
          "max_connections": 1000
        }
      ]
    }
  ],

  "routes": [
    {
      "path": "/api/*",
      "method": "GET",
      "upstream": "mock_backend",
      "handler_id": "api_full_middleware",
      "priority": 100,
      "auth_required": false,
      "transform": {
        "enabled": true,
        "path_rewrites": [
          {
            "type": "prefix_strip",
            "pattern": "/api",
            "replacement": ""
          }
        ],
        "request_headers": [
          {
            "action": "add",
            "name": "X-Gateway",
            "value": "Titan"
          },
          {
            "action": "add",
            "name": "X-Request-ID",
            "value": "${request_id}"
          }
        ],
        "response_headers": [
          {
            "action": "add",
            "name": "X-Served-By",
            "value": "Titan-Gateway"
          }
        ]
      }
    }
  ],

  "cors": {
    "enabled": true,
    "allowed_origins": ["*"],
    "allowed_methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
    "allowed_headers": ["Authorization", "Content-Type", "X-Request-ID"],
    "allow_credentials": false,
    "max_age": 3600
  },

  "rate_limit": {
    "enabled": true,
    "requests_per_second": 10000,
    "burst_size": 20000,
    "key": "client_ip"
  },

  "jwt": {
    "enabled": false,
    "header": "Authorization",
    "scheme": "Bearer",
    "require_exp": true,
    "require_sub": false,
    "clock_skew_seconds": 60,
    "cache_enabled": true,
    "cache_capacity": 10000
  },

  "transform": {
    "enabled": true,
    "request_headers": [
      {
        "action": "add",
        "name": "X-Forwarded-For",
        "value": "${client_ip}"
      }
    ]
  },

  "logging": {
    "level": "info",
    "format": "json",
    "log_requests": true,
    "log_responses": false
  }
}
